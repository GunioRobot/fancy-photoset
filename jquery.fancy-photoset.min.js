/* Copyright (c) 2010 Phil Cohen (http://phlippers.net)
 * Dual licensed under the MIT (MIT_LICENSE.txt)
 * and GPL Version 2 (GPL_LICENSE.txt) licenses.
 *
 * Version: 0.2.0
 * Requires jQuery 1.4.2+, Fancybox 1.3.1+
 * Docs: http://phlippers.net/code/fancy-photoset
 */
(function(a){a.fn.fancyPhotoset=function(f){var c=a.extend(a.fn.fancyPhotoset.defaults,f),e='fancyPhotoset-'+c.photosetId,g='http://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos&api_key={apiKey}&photoset_id={photosetId}&format=json&jsoncallback=?'.replace(/\{\w+\}/g,function(b){return c[b.replace(/\{|\}/g,'')]});return this.each(function(){var b=a(this);a(b).append(a('<ul/>').attr('id',e).addClass('fancyPhotoset'));a.getJSON(g,function(h){a.each(h.photoset.photo,function(i,d){a(b).find('ul').append(a('<li/>').html(a('<a/>').attr({href:a.fn.fancyPhotoset.urlFor(d, {size:c.large}),rel:'flickr-'+c.photosetId,title:d.title}).html(a('<img/>').attr({src:a.fn.fancyPhotoset.urlFor(d,{size:c.small}),title:d.title,alt:d.title}).after(c.captions?a('<span/>').addClass('caption').text(d.title):'')).fancybox()))});c.firstOnly&&a(b).find('li').not(':first').hide()})})};a.fn.fancyPhotoset.urlFor=function(f,c){var e=a.extend({size:'square',format:'jpg'},c),g={small:'_m',original:'_o',medium:'',large:'_b',thumbnail:'_t',square:'_s'};return'http://farm{farm}.static.flickr.com/{server}/{id}_{secret}{size}.{format}'.replace(/\{\w+\}/g, function(b){b=b.replace(/\{|\}/g,'');switch(b){case 'size':return g[e.size];case 'format':return e.format;default:return f[b]}})};a.fn.fancyPhotoset.defaults={apiKey:'',photosetId:'',small:'square',large:'medium',captions:true,firstOnly:false}})(jQuery);