/* Copyright (c) 2010 Phil Cohen (http://phlippers.net)
 * Dual licensed under the MIT (MIT_LICENSE.txt)
 * and GPL Version 2 (GPL_LICENSE.txt) licenses.
 *
 * Version: 0.1.0
 * Requires jQuery 1.4.2+, Fancybox 1.3.1+
 * Docs: http://phlippers.net/code/fancy-photoset
 */
(function(a){a.fn.fancyPhotoset=function(b){var d=a.extend(a.fn.fancyPhotoset.defaults,b);var e='fancyPhotoset-'+d.photosetId;var c='http://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos&api_key={apiKey}&photoset_id={photosetId}&format=json&jsoncallback=?'.replace(/\{\w+\}/g,function(f){return d[f.replace(/\{|\}/g,'')]});return this.each(function(){var f=a(this);a(f).append(a('<ul/>').attr('id',e).addClass('fancyPhotoset'));a.getJSON(c,function(g){a.each(g.photoset.photo,function(i,h){a(f).find('ul').append(a('<li/>').html(a('<a/>').attr({href:a.fn.fancyPhotoset.urlFor(h,{size:d.large}),rel:'flickr-'+d.photosetId,title:h.title}).html(a('<img/>').attr({src:a.fn.fancyPhotoset.urlFor(h,{size:d.small}),title:h.title,alt:h.title}).after((d.captions?a('<span/>').addClass('caption').text(h.title):''))).fancybox()))})})})};a.fn.fancyPhotoset.urlFor=function(d,c){var b='http://farm{farm}.static.flickr.com/{server}/{id}_{secret}{size}.{format}';var f=a.extend({size:'square',format:'jpg'},c);var e={small:'_m',original:'_o',medium:'',thumbnail:'_t',square:'_s'};return b.replace(/\{\w+\}/g,function(g){g=g.replace(/\{|\}/g,'');switch(g){case'size':return e[f.size];break;case'format':return f.format;break;default:return d[g]}})};a.fn.fancyPhotoset.defaults={apiKey:'',photosetId:'',small:'square',large:'medium',captions:true}})(jQuery);