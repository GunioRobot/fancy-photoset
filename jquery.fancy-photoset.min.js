/* Copyright (c) 2010 Phil Cohen (http://phlippers.net)
 * Dual licensed under the MIT (MIT_LICENSE.txt)
 * and GPL Version 2 (GPL_LICENSE.txt) licenses.
 *
 * Version: 0.3.0
 * Requires jQuery 1.4.2+, Fancybox 1.3.1+
 * Docs: http://phlippers.net/code/fancy-photoset
 */
(function(a){a.fn.fancyPhotoset=function(c){var b=a.extend(a.fn.fancyPhotoset.defaults,c),f='fancyPhotoset-'+b.photosetId,g='http://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos&api_key={apiKey}&photoset_id={photosetId}&extras=url_sq,url_t,url_s,url_m,url_o&format=json&jsoncallback=?'.replace(/\{\w+\}/g,function(e){return b[e.replace(/\{|\}/g,'')]});return this.each(function(){var e=a(this);a(e).append(a('<ul/>').attr('id',f).addClass('fancyPhotoset'));a.getJSON(g,function(h){a.each(h.photoset.photo,function(i,d){a(e).find('ul').append(a('<li/>').html(a('<a/>').attr({href:a.fn.fancyPhotoset.urlFor(d,{size:b.large}),rel:'flickr-'+b.photosetId,title:d.title}).html(a('<img/>').attr({src:a.fn.fancyPhotoset.urlFor(d,{size:b.small}),title:d.title,alt:d.title}).after(b.captions?a('<span/>').addClass('caption').text(d.title):'')).fancybox()))});b.firstOnly&&a(e).find('li').not(':first').hide()})})};a.fn.fancyPhotoset.urlFor=function(c,b){b=a.extend({size:'square'},b);return{square:c.url_sq,thumbnail:c.url_t,small:c.url_s,medium:c.url_m,original:c.url_o}[b.size]};a.fn.fancyPhotoset.defaults={apiKey:'',photosetId:'',small:'square',large:'medium',captions:true,firstOnly:false}})(jQuery);